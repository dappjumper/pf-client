(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[1],{"1f3d":function(t,e,a){},"388f":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{key:t.state,staticClass:"bg-transparent",class:{"absolute-top":!t.expanded},style:t.expanded?"":"padding:16px"},["loading"==t.state?a("div",[t._v("\n    Loading...\n  ")]):t._e(),"loading"!==t.state?a("div",[t.avatar?a("q-avatar",{staticClass:"q-mb-sm",style:t.expanded?"float: right; margin-left:3rem;":"",attrs:{size:t.expanded?"300px":"56px"}},[a("TelegramProfilePicture",{attrs:{user:t.user}})],1):t._e(),t.expanded?t._e():a("div",{staticClass:"text-weight-bold"},[t._v(t._s(t.user.first_name))]),t.expanded?t._e():a("div",[t._v("@"+t._s(t.user.username))]),t.expanded?a("div",[t._l(t.user,(function(e,n){return a("p",{key:n},["boolean"==typeof e?a("q-toggle",{attrs:{value:e,disable:"",label:t._f("pretty")(n)}}):t._e(),"string"==typeof e||"number"==typeof e?a("q-input",{attrs:{disable:"",filled:"",value:e,label:t._f("pretty")(n)}}):t._e()],1)})),t._m(0),a("q-btn",{attrs:{color:"red"},on:{click:function(e){t.confirmLogout=!0}}},[t._v("Log out")]),a("q-dialog",{model:{value:t.confirmLogout,callback:function(e){t.confirmLogout=e},expression:"confirmLogout"}},[a("q-card",[a("q-card-section",{staticClass:"row items-center"},[a("span",{staticClass:"q-ml-sm"},[t._v("Are you sure you wish to log out?")])]),a("q-card-actions",{attrs:{align:"right"}},[a("q-btn",{directives:[{name:"close-popup",rawName:"v-close-popup"}],attrs:{flat:"",label:"Cancel",color:"primary"}}),a("q-btn",{attrs:{label:"Log out",color:"red"},on:{click:function(e){return t.forget()}}})],1)],1)],1)],2):t._e()],1):t._e()])},o=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v("Please contact "),a("a",{attrs:{href:"https://t.me/botfather",target:"_blank"}},[t._v("@botfather")]),t._v(" to change these values")])}],r=(a("ac1f"),a("5319"),a("ded3")),s=a.n(r),i=a("2f62"),l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("img",{attrs:{SameSite:"None",src:t.avatarUrl}})},c=[],u={name:"UserBadge",props:["user"],components:{},data:function(){return{state:"loading",avatarUrl:"data:image/png;base64,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"}},watch:{user:{immediate:!0,handler:function(t){t.id&&(this.user=t,this.findAndDisplayPicture())}}},mounted:function(){},methods:s()(s()({},Object(i["b"])("localBot",["externalQuery"])),{},{assignPath:function(t){this.avatarUrl=this.$store.state.localBot.endpoint.file(t)},findAndDisplayPicture:function(){var t=this;if(this.$store.state.localBot.data&&this.$store.state.localBot.data["idToPhoto_"+this.user.id])return this.assignPath(this.$store.state.localBot.data["idToPhoto_"+this.user.id].file_path);this.externalQuery({method:"getUserProfilePhotos",data:{user_id:this.user.id,limit:1}}).then((function(e){if(e.data.ok){if(!e.data.result.photos[0])return!1;t.externalQuery({method:"getFile",save:"idToPhoto_"+t.user.id,data:{file_id:e.data.result.photos[0].pop().file_id}}).then((function(e){e.data.ok&&t.assignPath(e.data.result.file_path)})).catch((function(t){console.log("Could not get file path",t)}))}})).catch((function(t){console.log("Could not load profile picture",t)}))}})},d=u,p=a("2877"),f=Object(p["a"])(d,l,c,!1,null,null,null),h=f.exports,m={name:"UserBadge",props:["user","avatar","expanded"],components:{TelegramProfilePicture:h},data:function(){return{state:"loading",confirmLogout:!1}},watch:{user:{immediate:!0,handler:function(t){this.state="loading",t.id&&(this.user=t,this.state="ready")}}},filters:{pretty:function(t){var e=t;return e=e.replace(/_/g," "),e}},mounted:function(){},methods:s()(s()({},Object(i["b"])("localBot",["externalQuery","logOut"])),{},{forget:function(){this.logOut(),window.location.reload()}})},g=m,b=(a("a990"),a("cb32")),v=a("9564"),y=a("27f9"),A=a("9c40"),_=a("24e8"),Q=a("f09f"),x=a("a370"),P=a("4b7e"),B=a("8572"),q=a("7f67"),D=a("eebe"),k=a.n(D),O=Object(p["a"])(g,n,o,!1,null,null,null);e["a"]=O.exports;k()(O,"components",{QAvatar:b["a"],QToggle:v["a"],QInput:y["a"],QBtn:A["a"],QDialog:_["a"],QCard:Q["a"],QCardSection:x["a"],QCardActions:P["a"],QField:B["a"]}),k()(O,"directives",{ClosePopup:q["a"]})},5362:function(t,e,a){},"5d85":function(t,e,a){"use strict";var n=a("1f3d"),o=a.n(n);o.a},"80d9":function(t,e,a){},"8b24":function(t,e,a){"use strict";a.r(e);var n={};a.r(n),a.d(n,"DashboardIndex",(function(){return P})),a.d(n,"AboutIndex",(function(){return w})),a.d(n,"SettingsIndex",(function(){return G}));var o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",[a("BotController",{attrs:{rooted:t.$emit("rooted")}})],1)},r=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"fullscreen",class:{state:t.state}},[a("Spinner",{attrs:{active:"loading"==t.state}}),t.isLoggedIn?a("div",{key:t.state},["/app"==t.$route.path?a("DashboardPage",{attrs:{page:"dashboard"}}):t._e(),"/app/chat"==t.$route.path?a("DashboardPage",{attrs:{page:"chat"}}):t._e(),"/app/statistics"==t.$route.path?a("DashboardPage",{attrs:{page:"statistics"}}):t._e(),"/app/modules"==t.$route.path?a("DashboardPage",{attrs:{page:"modules"}}):t._e(),"/app/settings"==t.$route.path?a("DashboardPage",{attrs:{page:"settings"}}):t._e(),"/app/about"==t.$route.path?a("DashboardPage",{attrs:{page:"about"}}):t._e()],1):t._e(),t.isLoggedIn?t._e():a("div",{staticClass:"form supercenter"},[a("q-form",{staticClass:"q-gutter-md",on:{submit:t.onSubmit,reset:t.onReset}},[a("h2",[t._v("\n            Enter your API Key\n          ")]),a("p",[t._v("\n            An API Key can be obtained from the official Telegram "),a("a",{attrs:{href:"https://t.me/botfather",target:"_blank"}},[t._v("@botfather")])]),a("q-input",{attrs:{filled:"",label:"API key *",hint:"Your telegram bot API key","lazy-rules":"",rules:[function(t){return!!t||"Please type your key here"}]},model:{value:t.apikey_input,callback:function(e){t.apikey_input=e},expression:"apikey_input"}}),a("q-toggle",{attrs:{unselectable:"",label:"Allow this service to use API key"},on:{input:function(e){return t.$store.commit("localBot/setAllowInternal",t.accept)}},model:{value:t.accept,callback:function(e){t.accept=e},expression:"accept"}}),a("div",[a("q-btn",{class:{notallowed:!t.accept},staticStyle:{transition:"all .1s"},attrs:{label:"Submit",type:"submit",color:"primary"}}),a("q-btn",{staticClass:"q-ml-sm",attrs:{label:"Back",type:"reset",color:"primary",flat:""}})],1)],1)],1)],1)},i=[],l=a("ded3"),c=a.n(l),u=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"loadContainer",class:{active:t.active}},[a("div",{staticClass:"loader"})])},d=[],p={name:"Spinner",props:["active"],data:function(){return{}},computed:{},mounted:function(){},methods:{}},f=p,h=(a("5d85"),a("2877")),m=Object(h["a"])(f,u,d,!1,null,"855b097c",null),g=m.exports,b=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("transition",{attrs:{name:"pageTransition"}},[a("q-page",[t.primed?a(t.componentName,{tag:"component",attrs:{user:t.user}}):t._e(),t.primed?t._e():a("div",[t._v("\n      Loading your awesome "+t._s(t.page)+" content...\n    ")])],1)],1)},v=[],y=(a("fb6a"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("p",[t._v("Dashboard Index")])}),A=[],_={name:"DashboardIndex",data:function(){return{}},mounted:function(){},methods:{},filters:{}},Q=_,x=Object(h["a"])(Q,y,A,!1,null,"27c9f944",null),P=x.exports,B=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},q=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("p",[a("b",[t._v("A project by Tobias Andersen")])]),a("p",[t._v("\n    For more information and contact, please refer to tobias@andersen.work or visit "),a("a",{attrs:{href:"https://andersen.work",target:"_blank"}},[t._v("andersen.work")])]),a("p",[t._v("Version 0.4")])])}],D={name:"AboutIndex",data:function(){return{}},mounted:function(){},methods:{},filters:{}},k=D,O=Object(h["a"])(k,B,q,!1,null,"4663570b",null),w=O.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("UserBadge",{attrs:{user:t.user,expanded:"true",avatar:"true"}})],1)},I=[],S=a("388f"),N={name:"AboutIndex",data:function(){return{}},props:["user"],components:{UserBadge:S["a"]},mounted:function(){},methods:{},filters:{}},z=N,U=Object(h["a"])(z,C,I,!1,null,"33ce74ed",null),G=U.exports,j=a("2f62"),F={name:"DashboardPage",props:["page"],components:c()({},n),data:function(){return{primed:!1}},watch:{},computed:c()(c()({},Object(j["c"])("localBot",["getSavedData"])),{},{user:function(){return this.getSavedData("botGetMe")},apikey:function(){return this.$store.state.localBot.apikey},componentName:function(){var t=this.page.charAt(0).toUpperCase()+this.page.slice(1)+"Index";return this.$options.components[t]?t:""}}),mounted:function(){this.readyCheck()},methods:{readyCheck:function(){this.primed||(this.user?this.primed=!0:setTimeout(this.readyCheck,100))},getProperComponentName:function(){return"DashboardIndex"}},filters:{}},K=F,E=(a("dbd8"),a("c765"),a("9989")),J=a("eebe"),H=a.n(J),T=Object(h["a"])(K,b,v,!1,null,"9a8e049e",null),L=T.exports;H()(T,"components",{QPage:E["a"]});var V={name:"BotController",props:["serviceDomain"],components:{Spinner:g,DashboardPage:L},data:function(){return{state:"loading",apikey_input:"",accept:!1}},computed:{isLoggedIn:function(){return this.$store.state.localBot.isLoggedIn}},mounted:function(){var t=this.$store.state.localBot.apikey;this.accept=this.$store.state.localBot.allowInternal||"false",this.accept=JSON.parse(this.accept),t?(this.state="loading",this.fetchInitialBotData(t)):(this.state="initial",this.$emit("rooted"))},methods:c()(c()({},Object(j["b"])("localBot",["externalQuery","internalQuery"])),{},{fetchInitialBotData:function(t){var e=this;this.internalQuery({method:"checkIn",save:"botGetMe",data:{},apikey:t||this.apikey_input}).then((function(t){console.log("result",t)})).catch((function(t){e.$q.notify({type:"negative",message:"API key did not work",position:"bottom-right"}),console.log(t),e.state="initial"}))},onSubmit:function(){if(!this.accept)return this.$q.notify({type:"negative",message:"Please allow this service to use your API key",position:"bottom-right"});this.state="loading",this.fetchInitialBotData()},onReset:function(){window.location.href=""}})},Y=V,W=(a("9bde"),a("0378")),R=a("27f9"),X=a("9564"),M=a("9c40"),$=Object(h["a"])(Y,s,i,!1,null,"05b979dc",null),Z=$.exports;H()($,"components",{QForm:W["a"],QInput:R["a"],QToggle:X["a"],QBtn:M["a"]});var tt={name:"PageIndex",data:function(){return{}},computed:Object(j["d"])(["localBot"]),mounted:function(){},components:{BotController:Z},methods:{}},et=tt,at=Object(h["a"])(et,o,r,!1,null,"2d4696ca",null);e["default"]=at.exports;H()(at,"components",{QPage:E["a"]})},"9bde":function(t,e,a){"use strict";var n=a("a6d9"),o=a.n(n);o.a},a6d9:function(t,e,a){},a990:function(t,e,a){"use strict";var n=a("b02b"),o=a.n(n);o.a},b02b:function(t,e,a){},c765:function(t,e,a){"use strict";var n=a("5362"),o=a.n(n);o.a},dbd8:function(t,e,a){"use strict";var n=a("80d9"),o=a.n(n);o.a}}]);